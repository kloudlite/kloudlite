name: 'push notification to discord'

inputs:
  webhook_url:
    description: 'discord webhook url'
    required: true

runs:
  using: 'composite'
  steps:
    - name: Test Success
      uses: rjstone/discord-webhook-notify@v1
      if: success()
      with:
          severity: info
          details: Test Succeeded!
          webhookUrl: ${{ inputs.webhook_url }}

    - name: Test Failure
      uses: rjstone/discord-webhook-notify@v1
      if: failure()
      with:
          severity: error
          details: Test Failed!
          webhookUrl: ${{ inputs.webhook_url }}

    - name: Test Cancelled
      uses: rjstone/discord-webhook-notify@v1
      if: cancelled()
      with:
          severity: warn
          details: Test Cancelled!
          webhookUrl: ${{ inputs.webhook_url }}
