---
global:
  accountId: acc-5mr4frb21ssmhh2rriuxluzveodv
  projectId: "proj-bopxvo-qpfpodbz9lciwu45s5uqd"
  projectName: "sample"
---
label: Gitlab Groups
query: |
  query Query($query: String) {
    ci_gitlabGroups(query: $query)
  }
variables:
  query: madh

---

label: Gitlab Repos with Search
query: |
  query Query($groupId: String!, $search: String) {
    ci_gitlabRepos(groupId: $groupId, search: $search)
  }

variables:
  groupId: "8508925"
  search: "oper"

---

label: Gitlab Repo Branches
query: |
  query Query($repoId: String!) {
    ci_gitlabRepoBranches(repoId: $repoId)
  }
variables:
  repoId: "26232015"

---

label: Create Gitlab Pipeline with Docker
query: |
  mutation Ci_createDockerPipeline($in: GitDockerPipelineIn!) {
    ci_createDockerPipeline(in: $in)
  }
variables:
  in:
    name: sample-example
    accountId: "{{accountId}}"
    projectId: "{{projectId}}"
    appId: "not-app-id"
    projectName: "{{projectName}}"
    containerName: "main"
    gitProvider: gitlab
    repoName: "website"
    gitRepoUrl: "https://gitlab.com/madhouselabs/sample"
    gitBranch: master
    dockerFile: ./Dockerfile
    contextDir: ./
    buildArgs: ""
    artifactRef:
      dockerImageName: "harbor.dev.madhouselabs.io/{{accountId}}/website"
      dockerImageTag: "latest"

---

label: List Pipelines
query: |
  query Ci_getPipelines($projectId: ID!) {
    ci_getPipelines(projectId: $projectId) {
      id
      name
      dockerBuild {
        dockerFile
      }
      build {
        cmd
      }
    }
  }
variables:
  projectId: "{{projectId}}"
