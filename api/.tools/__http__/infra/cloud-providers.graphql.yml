---
global:
  accountId: acc-k-hw-z1woxao88zzw8wjwl5mu2bih
---
label: Create Cloud Provider
query: |+
  mutation Infra_createCloudProvider($cloudProvider: CloudProvider!, $providerSecret: Secret!) {
    infra_createCloudProvider(cloudProvider: $cloudProvider, providerSecret: $providerSecret)
  }
variables:
  providerSecret:
    apiVersion: crds.kloudlite.io/v1
    kind: Secret
    metadata:
      name: provider-sample-cp5
      namespace: kl-core
    stringData:
      accessKey: "key1"
      accessSecret: secret1
  cloudProvider:
    apiVersion: infra.kloudlite.io/v1
    kind: CloudProvider
    metadata:
      name: sample-cp5
    spec:
      accountId: "{{.accountId}}"
      providerSecret:
        name: sample-cp
        namespace: kl-core
---

label: List Providers
query: |+
  query Query($accountId: ID!) {
    infra_listCloudProviders(accountId: $accountId)
  }
variables:
  accountId: "{{.accountId}}"

---

label: Get Provider
query: |+
  query Query($accountId: ID!, $name: String!) {
    infra_getCloudProvider(accountId: $accountId, name: $name)
  }
variables:
  accountId: "{{.accountId}}"
  name: sample-cp5

---

label: Delete Provider
query: |+
  mutation Query($accountId: ID!, $name: String!) {
    infra_deleteCloudProvider(accountId: $accountId, name: $name)
  }
variables:
  accountId: "{{.accountId}}"
  name: sample-cp5
---
