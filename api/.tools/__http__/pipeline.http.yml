---
label: create github pipeline
query: |
  mutation Ci_createPipeline($in: GitPipelineIn!) {
    ci_createPipeline(in: $in)
  }
variables:
  in: 
    name: sample-pipeline

    gitProvider: github
    gitRepoUrl: https://github.com/nxtcoder17/sample
    gitBranch: master

    build:
      baseImage: docker
      cmd: |+
        docker build -t ${DOCKER_IMAGE_NAME}:${DOCKER_IMAGE_TAG} .
    run:
      baseImage: docker
      cmd: ""

    artifactRef:
      dockerImageName: harbor.dev.madhouselabs.io/public/sample
      dockerImageTag: latest

---

label: Create Gitlab Pipeline
query: |
  mutation Ci_createPipeline($in: GitPipelineIn!) {
    ci_createPipeline(in: $in)
  }
variables:
  in: 
    name: sample-pipeline

    gitProvider: gitlab
    gitRepoUrl: https://gitlab.com/madhouselabs/sample
    gitBranch: master

    build:
      baseImage: docker
      cmd: |+
        docker build -t ${DOCKER_IMAGE_NAME}:${DOCKER_IMAGE_TAG} .
    run:
      baseImage: docker
      cmd: ""

    artifactRef:
      dockerImageName: harbor.dev.madhouselabs.io/public/gitlab/sample
      dockerImageTag: latest

