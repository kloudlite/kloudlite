{{- $ownerRefs := get . "owner-refs" }}
{{- $obj := get . "object"}}
{{- with $obj }}
{{- /* gotype: operators.kloudlite.io/apis/crds/v1.ManagedResource */ -}}
apiVersion: {{.Spec.MsvcRef.APIVersion}}
kind: {{.Spec.ResRef.Kind}}
metadata:
  name: {{.Name}}
  namespace: {{.Namespace}}
  ownerReferences: {{ $ownerRefs | toYAML | nindent 4}}
  {{- if .Labels }}
  labels:
  {{- range $k,$v := .Labels}}
    {{$k}}: {{$v}}
  {{- end}}
    mres.kloudlite.io/ref: {{.Name}}
  {{- end }}
spec:
  managedSvcName: {{.Spec.MsvcRef.Name}}
  inputs: {{.Spec.Inputs | toJson }}
{{- end}}
