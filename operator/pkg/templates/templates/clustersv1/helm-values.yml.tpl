{{- $values := get . "values"}}
{{- $accountName := get . "accountName"}}
{{- $clusterName := get . "clusterName"}}

{{ with $values }}
### DO NOT EDIT, generated by 'task compile', use 'values.yml.tpl' file to update
# --  container image pull policy
imagePullPolicy: Always

# -- kloudlite account name
accountName: {{ $accountName }} 

# --  kloudlite cluster name
clusterName: {{ $clusterName }}

# --  kloudlite issued cluster token
clusterToken: {{ .ClusterToken }}

# -- kloudlite issued access token (if already have)
accessToken: {{if .AccessToken}}{{ .AccessToken }}{{ else }}""{{end}}


# -- cluster identity secret name, which keeps cluster token and access token
clusterIdentitySecretName: kl-cluster-identity

# -- default image pull secret name, defaults to kl-image-pull-creds
defaultImagePullSecretName: kl-image-pull-creds

# -- kloudlite message office api grpc address, should be in the form of 'grpc-host:grcp-port'
messageOfficeGRPCAddr: {{ if .MessageOfficeGRPCAddr }}{{.MessageOfficeGRPCAddr}}{{else}}message-office-api.dev.kloudlite.io:443{{end}}

# -- k8s service account name, which all the pods installed by this chart uses
svcAccountName: cluster-svc-account

agent:
  # -- enable/disable kloudlite agent
  enabled: true
  # -- workload name for kloudlite agent
  # @ignored
  name: kl-agent
  # -- kloudlite agent image name and tag
  image: {{if and (.Agent) (.Agent.Image) }}{{ .Agent.Image }}{{ else }}ghcr.io/kloudlite/agents/kl-agent:v1.0.5-nightly{{ end }}

# -- configuration for different kloudlite operators used in this chart
operators:
  resourceWatcher:
    # -- enable/disable kloudlite resource watcher
    enabled: true
    # -- workload name for kloudlite resource watcher
    # @ignored
    name: kl-resource-watcher
    # -- kloudlite resource watcher image name and tag
    image: {{if and (.Operators) (.Operators.ResourceWatcher) (.Operators.ResourceWatcher.Image) }}{{ .Operators.ResourceWatcher.Image }}{{ else }}ghcr.io/kloudlite/agents/resource-watcher:v1.0.5-nightly{{ end }}

  wgOperator:
    # -- whether to enable wg operator
    enabled: true
    # -- wg operator workload name
    # @ignored
    name: kl-wg-operator
    # -- wg operator image and tag
    image: {{if and (.Operators.WgOperator.Image) }}{{ .Operators.WgOperator.Image }}{{ else }}ghcr.io/kloudlite/agent/operator/wg:v1.0.5-nightly{{ end }}

    # -- wireguard configuration options
    configuration:
      # -- dns nameserver http endpoint
      nameserver:
        endpoint: {{ .Operators.WgOperator.Configuration.Nameserver.Endpoint }}
        # -- basic auth configurations for dns nameserver http endpoint
        basicAuth:
          # -- whether to enable basic auth for dns nameserver http endpoint
          enabled: true
          # -- if enabled, basic auth username for dns nameserver http endpoint
          username: {{ .Operators.WgOperator.Configuration.Nameserver.BasicAuth.UserName }}
          # -- if enabled, basic auth password for dns nameserver http endpoint
          password: {{ .Operators.WgOperator.Configuration.Nameserver.BasicAuth.Password }}
      # -- baseDomain for wireguard service, to be exposed
      baseDomain: {{ .Operators.WgOperator.Configuration.BaseDomain }}
      # -- cluster pods CIDR range
      podCidr: 10.42.0.0/16
      # -- cluster services CIDR range
      svcCidr: 10.43.0.0/16

{{end}}
